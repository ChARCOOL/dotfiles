# #---Basic Definitions--# #
set $mod Mod4
set $alt Mod1

floating_modifier $mod

# Gaps
gaps inner 16
gaps outer 16

# 2 pixel borders, do not show title bar
new_window pixel 2
default_border pixel 2

set $term --no-startup-id $TERMINAL

# Read Xresources just in case -- if it doesn't get read in xinitrc for some 
# reason
exec_always --no-startup-id xrdb ~/.Xresources



# #---Starting External Scripts---# #

exec --no-startup-id $HOME/dotfiles/bin/autostart.sh

# Set the desktop background
exec_always --no-startup-id feh --bg-fill $HOME/Pictures/wallpapers/wallpaper.jpg
# Composite manager (use dual kawase blur from 
# https://github.com/tryone144/compton/tree/feature/dual_kawase and just build 
# it (do not install system-wide since it's temporary))
exec_always --no-startup-id $HOME/Programs/compton/build/src/picom --experimental-backends -f
# Set up multiple monitors
exec_always --no-startup-id xrandr --output $MONITOR_RIGHT --output $MONITOR_LEFT --left-of $MONITOR_RIGHT
# Torrent daemon
exec --no-startup-id transmission-daemon
# Flameshot tray icon for taking screenshots
exec --no-startup-id flameshot

# Run Spotify automatically
exec --no-startup-id spotify
exec --no-startup-id slack



# #---Appearance---# #

# Read colors from Xresources
set_from_resource $darkred     color1  #000000
set_from_resource $red         color9  #000000
set_from_resource $darkgreen   color2  #000000
set_from_resource $green       color10 #000000
set_from_resource $darkyellow  color3  #000000
set_from_resource $yellow      color11 #000000
set_from_resource $darkblue    color4  #000000
set_from_resource $blue        color12 #000000
set_from_resource $darkmagenta color5  #000000
set_from_resource $magenta     color13 #000000
set_from_resource $darkcyan    color6  #000000
set_from_resource $cyan        color14 #000000
set_from_resource $darkwhite   color7  #000000
set_from_resource $white       color15 #000000

set_from_resource $darkergrey  color18 #000000
set_from_resource $darkgrey    color19 #000000
set_from_resource $lightergrey color18 #000000
set_from_resource $cursorLine  color4 #000000

set_from_resource $background  background #000000
set_from_resource $foreground  foreground #000000


# Window colors
# class                  border       backgr.      text         indicator    child_border
client.focused           $background  $darkergrey  $white       $cursorLine  $cursorLine
client.focused_inactive  $background  $background  $darkergrey  $background  $background
client.unfocused         $background  $background  $darkergrey  $background  $background
client.urgent            $background  $background  $darkergrey  #ffffff      $red
client.placeholder       $background  $background  $darkergrey  #ffffff      #ffffff

client.background        #ffffff

# Status bar
bar {
    i3bar_command $HOME/.config/polybar/launch.sh
}



# #---Workspaces---# #

# Workspaces
set $workspace1 "1: "
set $workspace2 "2: "
set $workspace3 "3: "
set $workspace4 "4: "
set $workspace5 "5: "
set $workspace6 "6: "
set $workspace7 "7: "
set $workspace8 "8: "
set $workspace9 "9: "
set $workspace10 "10: "

# Switch to workspace
bindsym $mod+1 workspace $workspace1
bindsym $mod+2 workspace $workspace2
bindsym $mod+3 workspace $workspace3
bindsym $mod+4 workspace $workspace4
bindsym $mod+5 workspace $workspace5
bindsym $mod+6 workspace $workspace6
bindsym $mod+7 workspace $workspace7
bindsym $mod+8 workspace $workspace8
bindsym $mod+9 workspace $workspace9
bindsym $mod+0 workspace $workspace10

# Move focused container to workspace
bindsym $mod+Shift+1 move container to workspace $workspace1
bindsym $mod+Shift+2 move container to workspace $workspace2
bindsym $mod+Shift+3 move container to workspace $workspace3
bindsym $mod+Shift+4 move container to workspace $workspace4
bindsym $mod+Shift+5 move container to workspace $workspace5
bindsym $mod+Shift+6 move container to workspace $workspace6
bindsym $mod+Shift+7 move container to workspace $workspace7
bindsym $mod+Shift+8 move container to workspace $workspace8
bindsym $mod+Shift+9 move container to workspace $workspace9
bindsym $mod+Shift+0 move container to workspace $workspace10

# Windows in workspaces
assign [class="Spotify"] $workspace2
assign [class="GitKraken"] $workspace6
assign [class="jetbrains-pycharm"] $workspace7
assign [class="Slack"] $workspace8
assign [class="Skype"] $workspace8
assign [class="discord"] $workspace8
assign [class="Google-chrome"] $workspace9
assign [class="Firefox"] $workspace9
assign [class="firefoxdeveloperedition"] $workspace9

# Spotify does not want to move automatically!
for_window [class="Spotify"] move to workspace $workspace2

# Make sure some workspaces open on the first monitor
workspace $workspace1 output $MONITOR_PRIMARY

# Open some workspaces on the second monitor automatically
workspace $workspace2 output $MONITOR_SECONDARY
workspace $workspace8 output $MONITOR_SECONDARY
workspace $workspace9 output $MONITOR_SECONDARY

# Workspace specific gaps
workspace $workspace1 gaps inner 0
workspace $workspace1 gaps outer 0



# #---Scratchpads---# #

# Dropdown
for_window [instance="dropdown"] floating enable
for_window [instance="dropdown"] resize set 820 500
for_window [instance="dropdown"] move scratchpad
for_window [instance="dropdown"] border pixel 5
exec --no-startup-id $term -t dropdown -n dropdown -c dropdown
# Python
for_window [instance="python"] floating enable
for_window [instance="python"] resize set 625 300
for_window [instance="python"] move scratchpad
for_window [instance="python"] border pixel 5
exec --no-startup-id $term -t python -n python -c python -e "bpython -q"



# #---Basic Bindings---# #

# Start a terminal
bindsym $mod+Return exec $term

bindsym $mod+space exec --no-startup-id rofi -show combi -show-icons

# Middle button over a titlebar kills the window
bindsym --release button2 kill



# #---Letter Key Bindings---# #

bindsym $mod+q          kill
bindsym $mod+Shift+q    exec --no-startup-id rofi-power

bindsym $mod+w          layout toggle splith tabbed

bindsym $mod+e          layout toggle split
bindsym $mod+Shift+e    exec --no-startup-id rofi-power

bindsym $mod+r          exec $term -e ranger
bindsym $mod+Shift+r    restart

# change focus between tiling / floating windows
bindsym $mod+t          focus mode_toggle
# toggle tiling / floating
bindsym $mod+Shift+t    floating toggle

bindsym $mod+Shift+y    exec --no-startup-id i3resize left

bindsym $mod+u          [instance="dropdown"] scratchpad show; [instance="dropdown"] move position center
bindsym $mod+Shift+u    exec --no-startup-id i3resize down

bindsym $mod+Shift+i    exec --no-startup-id i3resize up

bindsym $mod+Shift+o    exec --no-startup-id i3resize right

bindsym $mod+a          [instance="python"] scratchpad show; [instance="python"] move position center

# Change gap sizes
bindsym $mod+s          gaps inner current plus 8
bindsym $mod+Shift+s    gaps inner current minus 8

bindsym $mod+f          fullscreen toggle

bindsym $mod+g          exec --no-startup-id gitkraken

bindsym $mod+h          focus left
bindsym $mod+Shift+h    move left

bindsym $mod+j          focus down
bindsym $mod+Shift+j    move down

bindsym $mod+k          focus up
bindsym $mod+Shift+k    move up

bindsym $mod+l          focus right
bindsym $mod+Shift+l    move right

bindsym $mod+z          gaps outer current plus 8
bindsym $mod+Shift+z    gaps outer current minus 8

bindsym $mod+x          exec --no-startup-id betterlockscreen -l dim
bindsym $mod+Shift+x    exec --no-startup-id rofi -show power -show-icons

bindsym $mod+c          exec --no-startup-id pycharm
bindsym $mod+Shift+c    reload

bindsym $mod+v          split v
bindsym $mod+Shift+v    split h

bindsym $mod+b          exec --no-startup-id $BROWSER

bindsym $mod+n          exec --no-startup-id nautilus

# Move workspace to other monitor
bindsym $mod+m          move workspace to output right
bindsym $mod+Shift+m    exec --no-startup-id i3-swap



# #---Media keys---# #

# Screenshotting with maim, copy region to clipboard
bindsym --release Print exec --no-startup-id flameshot gui
# Save region to ~/Pictures/screenshots
bindsym --release Shift+Print exec --no-startup-id flameshot gui -p ~/Pictures/screenshots

# Pulse audio controls
bindsym XF86AudioRaiseVolume exec --no-startup-id changeVolume +5%
bindsym XF86AudioLowerVolume exec --no-startup-id changeVolume -5%
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute 0 toggle

# Media player controls
bindsym XF86AudioPlay exec --no-startup-id playerctl play-pause
bindsym XF86AudioNext exec --no-startup-id playerctl next
bindsym XF86AudioPrev exec --no-startup-id playerctl previous



# #---Arrow Keys---# #

bindsym $mod+Left focus left
bindsym $mod+Shift+Left move left

bindsym $mod+Down focus down
bindsym $mod+Shift+Down move down

bindsym $mod+Up focus up
bindsym $mod+Shift+Up move up

bindsym $mod+Right focus right
bindsym $mod+Shift+Right move right



# #---Plasma---# #

for_window [title="Desktop — Plasma"] kill; floating enable; border none

for_window [class="plasmashell"] floating enable
for_window [class="Plasma"] floating enable
for_window [class="krunner"] floating enable
for_window [class="Kmix"] floating enable
for_window [class="Klipper"] floating enable
for_window [class="Plasmoidviewer"] floating enable

# for_window [class="plasmashell" window_type="notification"] move position 1600 50;

for_window [window_role="pop-up"] floating enable
for_window [window_role="bubble"] floating enable
for_window [window_role="task_dialog"] floating enable
for_window [window_role="Preferences"] floating enable
for_window [window_role="About"] floating enable 
for_window [window_type="dialog"] floating enable
for_window [window_type="menu"] floating enable



# #---Random---# #

