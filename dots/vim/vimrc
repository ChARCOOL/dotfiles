" # Modeline {
" Rules only for this file
" vim: set sw=2 ts=2 sts=2 tw=78 foldmarker={,} foldmethod=marker spell:
" }
" # Environment {

" Read plugins
source ~/.vim/plugins.vim

let home = $HOME    " For convenience

" ## Identify platform {
silent function! MAC()
  return has('macunix')
endfunction
silent function! LINUX()
  return has('unix') && !has('macunix') && !has('win32unix')
endfunction

" }

" }
" # General {

nnoremap <space> <nop>
let mapleader="\<Space>"
let maplocalleader="\\"

" Integration with the system clipboard
if has('clipboard')
  if has('unnamedplus')
    " When possible, use the + register for copy/paste
    set clipboard=unnamed,unnamedplus
  else
    " On Mac and Windows, use the * register
    set clipboard=unnamed
  endif
endif

" }
" # Vim UI {

colorscheme OceanicNext

" }
" # Neovim {

" Neovim specific settings
if has('nvim')
  " Configure Python manually since we're using Pyenv
  let g:python_host_prog = $HOME . '/.pyenv/versions/neovim2/bin/python'
  let g:python3_host_prog = $HOME . '/.pyenv/versions/neovim3/bin/python'

  if (has('termguicolors'))
    set termguicolors
  endif

  if (empty($TMUX))
    " Use 24-bit (true-color) mode
    let $NVIM_TUI_ENABLE_TRUE_COLOR=1

    " Nvim terminal keybindings
    tnoremap <Esc> <C-\><C-n>
    tnoremap <M-[> <Esc>
    tnoremap <C-v><Esc> <Esc>
  endif
endif

augroup bufferLeave
  autocmd!
  " Hide and show cursorline in inactive buffers
  autocmd InsertLeave,WinEnter * set cursorline
  autocmd InsertEnter,WinLeave * set nocursorline
augroup END

" }
